@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import Design Tokens */
@import './styles/design-tokens.css';
@import './styles/animations.css';

/* Base Styles with Pyragogica Identity */
@layer base {
  html {
    font-family: var(--font-primary);
    line-height: var(--leading-normal);
    scroll-behavior: smooth;
  }
  
  body {
    @apply text-neutral-900 bg-neutral-50;
    font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Typography Hierarchy */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-primary);
    font-weight: 700;
    line-height: var(--leading-tight);
    letter-spacing: -0.025em;
  }
  
  h1 { font-size: var(--text-3xl); }
  h2 { font-size: var(--text-2xl); }
  h3 { font-size: var(--text-xl); }
  h4 { font-size: var(--text-lg); }
  h5 { font-size: var(--text-base); }
  h6 { font-size: var(--text-sm); }
  
  /* Reading-Optimized Paragraphs */
  p {
    line-height: var(--leading-relaxed);
    margin-bottom: var(--space-md);
  }
  
  /* Code and Technical Content */
  code, pre {
    font-family: var(--font-accent);
    font-size: var(--text-sm);
  }
  
  /* Focus States for Accessibility */
  *:focus {
    outline: 2px solid var(--primary-500);
    outline-offset: 2px;
  }
  
  /* Selection Styling */
  ::selection {
    background-color: var(--primary-200);
    color: var(--primary-900);
  }
}

/* Component Layer - Unique Pyragogica Components */
@layer components {
  /* Collaborative Button Base */
  .btn-collaborative {
    @apply inline-flex items-center justify-center;
    @apply px-6 py-3 rounded-2xl font-semibold;
    @apply transition-all duration-300 ease-out;
    @apply focus:outline-none focus:ring-4 focus:ring-primary-500/20;
    @apply transform hover:scale-105 active:scale-95;
  }
  
  .btn-primary {
    @apply btn-collaborative;
    @apply bg-gradient-to-r from-primary-600 to-accent-600;
    @apply text-white shadow-lg hover:shadow-xl;
    @apply hover:from-primary-700 hover:to-accent-700;
  }
  
  .btn-secondary {
    @apply btn-collaborative;
    @apply bg-white border-2 border-neutral-300;
    @apply text-neutral-700 hover:text-neutral-900;
    @apply hover:bg-neutral-50 hover:border-neutral-400;
  }
  
  /* Knowledge Cards */
  .knowledge-card {
    @apply bg-white rounded-3xl shadow-lg border border-neutral-100;
    @apply transition-all duration-500 ease-out;
    @apply hover:shadow-2xl hover:-translate-y-2;
    @apply group relative overflow-hidden;
  }
  
  .knowledge-card::before {
    content: '';
    @apply absolute inset-0 rounded-3xl;
    @apply bg-gradient-to-br from-primary-50 to-accent-50;
    @apply opacity-0 group-hover:opacity-100;
    @apply transition-opacity duration-500;
  }
  
  /* Personality Indicators */
  .personality-academic {
    --personality-color: var(--personality-academic-primary);
    --personality-radius: var(--personality-academic-radius);
  }
  
  .personality-socratic {
    --personality-color: var(--personality-socratic-primary);
    --personality-radius: var(--personality-socratic-radius);
  }
  
  .personality-critical {
    --personality-color: var(--personality-critical-primary);
    --personality-radius: var(--personality-critical-radius);
  }
  
  .personality-divulgative {
    --personality-color: var(--personality-divulgative-primary);
    --personality-radius: var(--personality-divulgative-radius);
  }
  
  /* Collaborative Presence */
  .collaborative-presence {
    @apply relative;
  }
  
  .collaborative-presence::after {
    content: '';
    @apply absolute -top-1 -right-1;
    @apply w-3 h-3 bg-secondary-500 rounded-full;
    @apply animate-pulse;
  }
  
  /* Learning State Indicators */
  .learning-exploring {
    @apply border-l-4 border-knowledge-emerging;
    background: linear-gradient(90deg, var(--knowledge-emerging) 0%, transparent 100%);
    background-size: 25% 100%;
    background-repeat: no-repeat;
  }
  
  .learning-developing {
    @apply border-l-4 border-knowledge-developing;
    background: linear-gradient(90deg, var(--knowledge-developing) 0%, transparent 100%);
    background-size: 50% 100%;
    background-repeat: no-repeat;
  }
  
  .learning-mastering {
    @apply border-l-4 border-knowledge-mastered;
    background: linear-gradient(90deg, var(--knowledge-mastered) 0%, transparent 100%);
    background-size: 75% 100%;
    background-repeat: no-repeat;
  }
  
  .learning-sharing {
    @apply border-l-4 border-knowledge-shared;
    background: linear-gradient(90deg, var(--knowledge-shared) 0%, transparent 100%);
    background-size: 100% 100%;
    background-repeat: no-repeat;
  }
  
  /* Thoughtful Loading States */
  .loading-thoughtful {
    @apply relative overflow-hidden;
  }
  
  .loading-thoughtful::before {
    content: '';
    @apply absolute inset-0;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(14, 165, 233, 0.1),
      transparent
    );
    animation: thoughtful-sweep 2s ease-in-out infinite;
  }
  
  /* Constellation Navigation */
  .constellation-nav {
    @apply relative;
    background: radial-gradient(circle at 50% 50%, var(--primary-50) 0%, transparent 70%);
  }
  
  .constellation-node {
    @apply absolute w-12 h-12 rounded-2xl;
    @apply bg-white shadow-lg border-2 border-white;
    @apply flex items-center justify-center;
    @apply transition-all duration-300 ease-out;
    @apply hover:scale-125 hover:shadow-2xl;
    @apply cursor-pointer;
  }
  
  .constellation-node.active {
    @apply bg-gradient-to-r from-primary-600 to-accent-600;
    @apply text-white scale-110 shadow-xl;
  }
  
  /* Responsive Typography */
  .text-responsive-xl {
    @apply text-2xl md:text-3xl lg:text-4xl xl:text-5xl;
  }
  
  .text-responsive-lg {
    @apply text-xl md:text-2xl lg:text-3xl;
  }
  
  .text-responsive-md {
    @apply text-lg md:text-xl lg:text-2xl;
  }
}

/* Utility Layer - Custom Utilities */
@layer utilities {
  /* Spacing Utilities Based on Learning Rhythms */
  .space-micro { @apply space-y-1; }
  .space-xs { @apply space-y-2; }
  .space-sm { @apply space-y-4; }
  .space-md { @apply space-y-6; }
  .space-lg { @apply space-y-8; }
  .space-xl { @apply space-y-12; }
  .space-2xl { @apply space-y-16; }
  .space-3xl { @apply space-y-24; }
  
  /* Gradient Text Utilities */
  .text-gradient-primary {
    @apply bg-gradient-to-r from-primary-600 to-accent-600;
    @apply bg-clip-text text-transparent;
  }
  
  .text-gradient-secondary {
    @apply bg-gradient-to-r from-secondary-600 to-primary-600;
    @apply bg-clip-text text-transparent;
  }
  
  /* Shadow Utilities with Personality */
  .shadow-collaborative {
    box-shadow: var(--shadow-lg), var(--glow-secondary);
  }
  
  .shadow-thinking {
    box-shadow: var(--shadow-xl), var(--glow-primary);
  }
  
  .shadow-insight {
    box-shadow: var(--shadow-2xl), var(--glow-accent);
  }
  
  /* Animation Delay Utilities */
  .animation-delay-200 { animation-delay: 200ms; }
  .animation-delay-400 { animation-delay: 400ms; }
  .animation-delay-600 { animation-delay: 600ms; }
  .animation-delay-800 { animation-delay: 800ms; }
  .animation-delay-1000 { animation-delay: 1000ms; }
  
  /* Backdrop Blur Utilities */
  .backdrop-blur-xs { backdrop-filter: blur(2px); }
  .backdrop-blur-sm { backdrop-filter: blur(4px); }
  .backdrop-blur-md { backdrop-filter: blur(8px); }
  .backdrop-blur-lg { backdrop-filter: blur(12px); }
  .backdrop-blur-xl { backdrop-filter: blur(16px); }
  
  /* Collaborative Interaction States */
  .hover-lift {
    @apply transition-all duration-300 ease-out;
    @apply hover:-translate-y-2 hover:shadow-xl;
  }
  
  .hover-glow {
    @apply transition-all duration-300 ease-out;
  }
  
  .hover-glow:hover {
    box-shadow: var(--shadow-lg), var(--glow-primary);
  }
  
  .hover-scale {
    @apply transition-transform duration-300 ease-out;
    @apply hover:scale-105 active:scale-95;
  }
  
  /* Content Visibility Utilities */
  .fade-in {
    animation: knowledge-flow 0.7s var(--ease-thinking) forwards;
  }
  
  .slide-up {
    animation: emergence 1s var(--ease-collaborative) forwards;
  }
  
  /* Personality-Specific Utilities */
  .academic-style {
    @apply font-medium;
    border-radius: var(--personality-academic-radius);
    color: var(--personality-academic-primary);
  }
  
  .socratic-style {
    @apply font-normal italic;
    border-radius: var(--personality-socratic-radius);
    color: var(--personality-socratic-primary);
  }
  
  .critical-style {
    @apply font-semibold;
    border-radius: var(--personality-critical-radius);
    color: var(--personality-critical-primary);
  }
  
  .divulgative-style {
    @apply font-normal;
    border-radius: var(--personality-divulgative-radius);
    color: var(--personality-divulgative-primary);
  }
}

/* Custom Keyframes */
@keyframes thoughtful-sweep {
  0% { transform: translateX(-100%); }
  50% { transform: translateX(0%); }
  100% { transform: translateX(100%); }
}

@keyframes collaborative-dots {
  0%, 80%, 100% {
    transform: scale(0.8);
    opacity: 0.5;
  }
  40% {
    transform: scale(1.2);
    opacity: 1;
  }
}

/* Print Styles */
@media print {
  .no-print {
    display: none !important;
  }
  
  body {
    @apply text-neutral-900 bg-white;
  }
  
  .knowledge-card {
    @apply shadow-none border border-neutral-300;
    break-inside: avoid;
  }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .btn-primary {
    @apply bg-neutral-900 text-white;
    @apply border-2 border-neutral-900;
  }
  
  .knowledge-card {
    @apply border-2 border-neutral-900;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .hover-lift:hover {
    transform: none;
  }
  
  .hover-scale:hover {
    transform: none;
  }
}